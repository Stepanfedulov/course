<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Admin GUI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        function showBlock(blockId) {
            document.getElementById('welcomeBlock').style.display = 'none';
            document.getElementById('userManagementBlock').style.display = 'none';
            document.getElementById('requestManagementBlock').style.display = 'none';
            document.getElementById(blockId).style.display = 'block';
        }

        function showComment(comment) {
            var commentBlock = document.getElementById('commentBlock');
            if (commentBlock.style.display === 'none' || commentBlock.style.display === '') {
                commentBlock.innerHTML = comment;
                commentBlock.style.display = 'block';
            } else {
                commentBlock.style.display = 'none';
            }
        }
    </script>
    <link rel="stylesheet" href="css/styles.css?rnd=<?= rand(0, 99999) ?>">
    <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <link rel="icon" href="img/favicon-196x196.png" sizes="196x196">
</head>
<body>
    <main>
        <div class="gui">
            <div class="headergui">
                <div class="headerpadding">
                    <div class="logoheader">
                        <img class="headerimg" src="img/logo.svg">
                    </div>
                    <div class="logoutcont">
                        <a class="logout" href="index.html">Выйти</a>
                    </div>
                </div>
            </div>
            <div class="welcomeBlock" id="welcomeBlock">
                <h2>Добро пожаловать, Администратор!</h2>
                <h3>Здесь вы можете управлять пользователями и заявками.</h3>
                <button style="margin-right:5px" class="guibutton" onclick="showBlock('userManagementBlock')">Управление пользователями</button>
                <button style="margin-left:5px" class="guibutton" onclick="showBlock('requestManagementBlock')">Управление заявками</button>
            </div>
            <div class="myrequests" id="userManagementBlock" style="display:none;">
                <h2>Управление пользователями</h2>
                <h3>Создание пользователя</h3>
                <form class="usercreateform" method="POST">
                    <div class="usercrblock">
                        <label for="newUser">Имя пользователя:</label>
                        <input class="usercrinput" type="text" id="newUser" name="username" required>
                    </div>
                    <br>
                    <div class="usercrblock">
                        <label for="newLogin">Логин:</label>
                        <input class="usercrinput" type="text" id="newLogin" name="login" required>
                    </div>
                    <br>
                    <div class="usercrblock">
                        <label for="newPassword">Пароль:</label>
                        <input class="usercrinput" type="password" id="newPassword" name="password" required>
                    </div>
                    <label style="margin-top:5px" for="newRights">Права:</label>
                    <select class="usercrselect" id="newRights" name="rights" required>
                        <option value="user">User</option>
                        <option value="programmer">Programmer</option>
                        <option value="sysadmin">SysAdmin</option>
                    </select>
                    <button style="margin-top:20px; margin-bottom:25px" class="guibutton" type="submit">Создать пользователя</button>
                </form>

                <h3>Существующие пользователи</h3>
                <div id="tableblock">
                    <table>
                        <tr>
                            <th>ID</th>
                            <th>Имя пользователя</th>
                            <th>Логин</th>
                            <th>Права</th>
                            <th>Действие</th>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td style='text-align:center; word-wrap:normal; max-width:300px;'>Васильев В.В.</td>
                            <td>vasiliev</td>
                            <td>
                                <form method='POST'>
                                    <input type='hidden' name='user_id' value='1'>
                                    <select name='rights'>
                                        <option value='user'selected>User</option>
                                        <option value='programmer' >Programmer</option>
                                        <option value='sysadmin'>SysAdmin</option>
                                    </select>
                                    <button class='guitbbutton' type='submit'>Обновить</button>
                                </form>
                            </td>
                            <td>
                                <form method='POST' action='delete_user.php'>
                                    <input type='hidden' name='user_id' value='1'>
                                    <button class='guitbbutton' type='submit'>Удалить</button>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td style='text-align:center; word-wrap:normal; max-width:300px;'>Петров П.П.</td>
                            <td>petrov</td>
                            <td>
                                <form method='POST'>
                                    <input type='hidden' name='user_id' value='2'>
                                    <select name='rights'>
                                        <option value='user'selected>User</option>
                                        <option value='programmer'>Programmer</option>
                                        <option value='sysadmin' >SysAdmin</option>
                                    </select>
                                    <button class='guitbbutton' type='submit'>Обновить</button>
                                </form>
                            </td>
                            <td>
                                <form method='POST'>
                                    <input type='hidden' name='user_id' value='2'>
                                    <button class='guitbbutton' type='submit'>Удалить</button>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td style='text-align:center; word-wrap:normal; max-width:300px;'>Смирнов С.С.</td>
                            <td>smirnov</td>
                            <td>
                                <form method='POST'>
                                    <input type='hidden' name='user_id' value='3'>
                                    <select name='rights'>
                                        <option value='user' selected>User</option>
                                        <option value='programmer'>Programmer</option>
                                        <option value='sysadmin'>SysAdmin</option>
                                    </select>
                                    <button class='guitbbutton' type='submit'>Обновить</button>
                                </form>
                            </td>
                            <td>
                                <form method='POST'>
                                    <input type='hidden' name='user_id' value='3'>
                                    <button class='guitbbutton' type='submit'>Удалить</button>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td style='text-align:center; word-wrap:normal; max-width:300px;'>Кузнецов К.К.</td>
                            <td>kuznetsov</td>
                            <td>
                                <form method='POST'>
                                    <input type='hidden' name='user_id' value='3'>
                                    <select name='rights'>
                                        <option value='user' selected>User</option>
                                        <option value='programmer'>Programmer</option>
                                        <option value='sysadmin'>SysAdmin</option>
                                    </select>
                                    <button class='guitbbutton' type='submit'>Обновить</button>
                                </form>
                            </td>
                            <td>
                                <form method='POST'>
                                    <input type='hidden' name='user_id' value='3'>
                                    <button class='guitbbutton' type='submit'>Удалить</button>
                                </form>
                            </td>
                        </tr>
                    </table>
                </div>
                <button style="margin-top:25px" class="guibutton" onclick="showBlock('requestManagementBlock')">Управление заявками</button>
            </div>

            <div class="viewBlock" id="requestManagementBlock" style="display:none;">
                <div class="myrequests">
                    <h3>Управление заявками</h3>
                    <table>
                        <tr>
                            <th>ID</th>
                            <th>Имя пользователя</th>
                            <th>Тема</th>
                            <th style="width:239px">Подробности</th>
                            <th style="width:300px">Статус</th>
                            <th>Действие</th>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td style='text-align:center; word-wrap:word-break; max-width:300px;'>Кузнецов К.К.</td>
                            <td>Ошибка в коде программы</td>
                            <td>
                                <button class='guitbbutton' onclick="showComment('при выполнении функции calc() возникает исключение')">Посмотреть подробности</button>
                            </td>
                            <td>
                                <form method='POST'>
                                    <input type='hidden' name='req_id' value='1'>
                                    <select name='req_status'>
                                        <option value="В работе" selected>В работе</option>
                                        <option value="Отправлена на доработку">Отправлена на доработку</option>
                                        <option value="Закрыта">Закрыта</option>
                                        <option value="Завершена">Завершена</option>
                                    </select>
                                    <button class='guitbbutton' type='submit'>Обновить</button>
                                </form>
                            </td>
                            <td>
                                <form method='POST'>
                                    <input type='hidden' name='req_id' value='1'>
                                    <button class='guitbbutton' type='submit'>Удалить</button>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td style='text-align:center; word-wrap:word-break; max-width:300px;'>Смирнов С.С.</td>
                            <td>Оптимизация алгоритма</td>
                            <td>
                                <button class='guitbbutton' onclick="showComment('нужно улучшить производительность метода sortData()')">Посмотреть подробности</button>
                            </td>
                            <td>
                                <form method='POST'>
                                    <input type='hidden' name='req_id' value='2'>
                                    <select name='req_status'>
                                        <option value="В работе" selected>В работе</option>
                                        <option value="Отправлена на доработку">Отправлена на доработку</option>
                                        <option value="Закрыта">Закрыта</option>
                                        <option value="Завершена">Завершена</option>
                                    </select>
                                    <button class='guitbbutton' type='submit'>Обновить</button>
                                </form>
                            </td>
                            <td>
                                <form method='POST'>
                                    <input type='hidden' name='req_id' value='2'>
                                    <button class='guitbbutton' type='submit'>Удалить</button>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td style='text-align:center; word-wrap:word-break; max-width:300px;'>Васильев В.В.</td>
                            <td>Добавление нового функционала</td>
                            <td>
                                <button class='guitbbutton' onclick="showComment('требуется реализовать возможность экспорта данных в PDF')">Посмотреть подробности</button>
                            </td>
                            <td>
                                <form method='POST'>
                                    <input type='hidden' name='req_id' value='3'>
                                    <select name='req_status'>
                                        <option value="В работе" selected>В работе</option>
                                        <option value="Отправлена на доработку">Отправлена на доработку</option>
                                        <option value="Закрыта">Закрыта</option>
                                        <option value="Завершена">Завершена</option>
                                    </select>
                                    <button class='guitbbutton' type='submit'>Обновить</button>
                                </form>
                            </td>
                            <td>
                                <form method='POST' action='delete_request.php'>
                                    <input type='hidden' name='req_id' value='3'>
                                    <button class='guitbbutton' type='submit'>Удалить</button>
                                </form>
                            </td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td style='text-align:center; word-wrap:word-break; max-width:300px;'>Петров П.П.</td>
                            <td>Проблема с сетевым подключением</td>
                            <td>
                                <button class='guitbbutton' onclick="showComment('нет доступа к интернету, показывает ошибку подключения')">Посмотреть подробности</button>
                            </td>
                            <td>
                                <form method='POST' action='update_request.php'>
                                    <input type='hidden' name='req_id' value='4'>
                                    <select name='req_status'>
                                        <option value="В работе" selected>В работе</option>
                                        <option value="Отправлена на доработку">Отправлена на доработку</option>
                                        <option value="Закрыта">Закрыта</option>
                                        <option value="Завершена">Завершена</option>
                                    </select>
                                    <button class='guitbbutton' type='submit'>Обновить</button>
                                </form>
                            </td>
                            <td>
                                <form method='POST' action='delete_request.php'>
                                    <input type='hidden' name='req_id' value='4'>
                                    <button class='guitbbutton' type='submit'>Удалить</button>
                                </form>
                            </td>
                        </tr>
                    </table>
                    <div class="commentBlock" id="commentBlock"></div>
                    <button style="margin-top:25px" class="guibutton" onclick="showBlock('userManagementBlock')">Управление пользователями</button>
                </div>
            </div>

            <script>
                showBlock('welcomeBlock');
            </script>
        </div>
    </main>
    <footer>
        <p style='margin-top:6px'>Разработал: Федулов Степан Александрович</p>
    </footer>
</body>
</html>